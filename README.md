# 소개

Nest.js의 경험을 가지고 자바 스프링 프레임워크의 JPA를 체험하기 위해 급하게 만든 프로젝트로 DB에서 테이블을 SELECT하여 LIST를 JSON으로 반환하는 기능 밖에는 없습니다.

# 개발 일지

## 2022.08.21 (1일차)

초기 프로젝트 세팅을 Visual Studio Code(JPA + QueryDSL + Lombok)로 하였고 진행하였으나 QueryDSL 추가 후, 클래스를 찾을 수 없는 진행할 수 없는 문제(`.classpath 문제`)로 인하여 인텔리제이로 전환하였습니다.

`application-dev.yml` 파일을 설정해야 로컬 DB와 정상적으로 연동이 됩니다. 인프라 세팅을 위한 Docker Compose 파일은 만들지 않았기 때문에 로컬에 먼저 인프라 구성이 되어야만 구동이 될 것입니다.

체험 결과, 정상적인 동작은 하나 H2 + JPA가 TypeORM과 달리, 테이블을 캐시하는 부분이 있는 듯 하여 해결에 어려움이 있었습니다. 또한 ddl-auto의 create 옵션이 TypeORM과 달리, 다양한 옵션이 존재하여 변경점만 적용하는 것과 달리, 테이블을 DROP하고 다시 CREATE 하여 이 부분을 해결하는데 시간이 걸렸으며, 라이브러리 버전 문제와 nest-cli 같은 기능이 아직 없어서, 기본적인 엔티티, 서비스, DTO, 저장소 구성 시 더 시간이 소요되었습니다. 또한 추가 라이브러리 설정 시 build.gradle을 수동으로 수정해야 하는 등 초기 프로젝트 구성에 상당한 시간이 소요되는 건 덤이었습니다. 또한 인텔리제이나 이클립스 사용법에 익숙하지 않아 처음에 Visual Studio Code로 프로젝트를 구성한 것도 문제였습니다.

H2의 경우, 그 커넥션과 SQL Write 특성이 노드의 TypeORM과는 전혀 달랐습니다. 영속성 컨텍스트라는 것의 존재로 인한 것인지, 중간에 IDE를 바꿔서 생긴 현상인지 모르겠으나 톰캣을 종료할 경우, MariaDB에 실제로 테이블이 존재하지 않는데도 존재한다고 표시되었으며 어딘가에 정보가 영구적으로 남아있거나 캐시가 되는 현상이 있었습니다.

ddl-auto의 create(테이블 자동 생성)의 경우, DROP Table 등의 문제로 TypeORM과 달리 쓰지 않는 것이 더 좋다고 판단되었습니다.

> ddl-auto를 create로 하면 매번 DROP TABLE 되고, CREATE TABLE이 된다. 