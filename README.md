# 소개

Nest.js의 경험을 가지고 자바 스프링 프레임워크의 JPA를 체험하기 위해 급하게 만든 프로젝트로 DB에서 테이블을 SELECT하여 LIST를 JSON으로 반환하는 기능 밖에는 없다.

# 개발 일지

## 2023.01.30 (3일차)

예전에 구매한 스프링 시큐리티 강좌로 간단한 세팅을 했는데, 조금 방대해서 세세한 옵션은 나중에 공부해봐야 할 듯 싶다.  

## 2023.01.29 (2일차)

JPA 프로그래밍 서적을 1/3 가량 읽고, JPA 매핑 방법을 학습하였고 스웨거 등을 세팅하였다. JPA는 노드 진영의 ORM들과 달리 상당히 진보되어있었다. 다만 그동안 익숙하게 사용했던 `Visual Studio Code`로는 코딩이 거의 불가능했으며 인텔리제이에 의존해야 했다. 2020 맥북 에어 M1은 쾌적하지 않음을 알게 되었다.

## 2022.08.21 (1일차)

초기 프로젝트 세팅을 Visual Studio Code(JPA + QueryDSL + Lombok)로 하였고 진행하였으나 QueryDSL 추가 후, 클래스를 찾을 수 없는 진행할 수 없는 문제(`.classpath 문제`)로 인하여 인텔리제이로 전환하였다.
`application-dev.yml` 파일을 설정해야 로컬 DB와 정상적으로 연동이 된다. 인프라 세팅을 위한 도커 컴포즈 파일은 따로 만들지 않았기 때문에 로컬에 먼저 인프라 구성이 되어야만 구동이 될 것이다.
체험 결과, 정상적인 동작은 하나 H2 + JPA가 TypeORM과 달리, 테이블을 캐시하는 부분이 있는 듯 하여 해결에 어려움이 있었다. 
또한 ddl-auto의 create 옵션이 TypeORM과 달리, 다양한 옵션이 존재하여 변경점만 적용하는 것과 달리, 테이블을 DROP하고 다시 CREATE하였는데 이 부분을 해결하는데 시간이 걸렸으며, 
라이브러리 버전 문제와 nest-cli 같은 기능이 아직 없어서, 기본적인 엔티티, 서비스, DTO, 저장소 구성 시 더 시간이 소요되었다. 

또한 추가 라이브러리 설정 시 build.gradle을 수동으로 수정해야 하는 등 초기 프로젝트 구성에 상당한 시간이 소요되는 건 덤이었고, 인텔리제이에 익숙하지 않아 처음에 `Visual Studio Code`로 프로젝트를 구성한 것도 문제였다.

H2의 경우, 그 커넥션과 SQL Write 특성이 노드의 TypeORM과는 전혀 달랐다. 영속성 컨텍스트라는 것의 존재로 인한 것인지, 중간에 IDE를 바꿔서 생긴 현상인지 모르겠으나 톰캣을 종료할 경우, MariaDB에 실제로 테이블이 존재하지 않는데도 존재한다고 표시되었으며 
어딘가에 정보가 영구적으로 남아있거나 캐시가 되는 현상이 있었다.

ddl-auto의 create(테이블 자동 생성)의 경우, DROP Table 등의 문제로 TypeORM과 달리 개발 모드에서도 아예 쓰지 않는 것이 더 좋다고 판단되었다. 